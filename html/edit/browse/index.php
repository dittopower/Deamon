<?php	require_once "/var/www/html/lib.php";	page();	$base_dir = getUserPerm("access");	if($base_dir == ''){		$base_dir = "../media/$_SESSION[person]";	}else if($base_dir == ".*"){		$base_dir = "";	}?><style>	#browser{		min-height: 500px;		border: 1px solid black;	}	.dir{		display:inline-block;		width: 15ch;		height: 10ch;		margin: 1.2em;		vertical-align: top;		overflow-wrap: break-word;		text-decoration: none;		color: white;		cursor: pointer;	}	.dir p {	margin: 1ch 2ch 1ch 1ch;	}	.folder {		position: relative;		background-color: #000000cc;		border-radius: 0 6px 6px 6px;		box-shadow: 4px 4px 7px rgba(0, 0, 0, 0.59);	}	.folder:before {		content: '';		width: 45%;		height: 1ch;		border-radius: 2ch 2ch 0 0;		background-color: #000000e6;		position: absolute;		top: -1ch;		left: 0ch;	}		.file {		position: relative;		background-color: #c80000;		border-radius: 6px 18px 6px 6px;		box-shadow: 4px 4px 7px rgba(0, 0, 0, 0.59);	}	.file:before {		content: '';		background-color: #af0101;		position: absolute;		top: 0ch;		right: 0ch;		border-style: solid;		border-width: 0 2ch 2ch 0;		border-color: transparent #af0101 transparent transparent;		box-shadow: -1px 1px 4px 0px rgba(0,0,0,0.3);		border-radius: 0 2ch;	}#browsercontrols > button{display:inline-block;padding: 1ch;background:black;color:white;border-radius:1ch;		box-shadow: 4px 4px 7px rgba(0, 0, 0, 0.59);    min-width: 8ch;    max-width: fit-content;text-align:center;margin:1ch;		cursor: pointer;}</style><div id='browser'></div><div id='browsercontrols'><button id='back'>Back</button><button id='Move'>Move</button><button id='Delete'>Delete</button></div><script>	var basedir = '<?php echo $base_dir;?>';	var canvas = $('#browser');	var bback = $('#back');	var bmove = $('#Move');	var bdelete = $('#Delete');	var myhistory = Array();	var current = "";	var next = basedir;	var request;	function fetchdir(dir,remember){		next = dir;		request = $.get( "//deamon.info/api/files/", { where: dir },function(data){updatebrowser(data,remember);} );	}		function updatebrowser (data,remember){		if(request.status == 200){			if(remember != false){				myhistory.push(current);			}			current = next;			next = "";			canvas.empty();			var action;			JSON.parse(request.responseText).forEach(function(dat){				if(dat['folder']){					type = 'folder';					action = '';					var div = ("<div class='dir folder' onclick='fetchdir("+'"'+current+"/"+dat['name']+'"'+")'><p>"+dat['name']+"</p></div>");				}else{					var div = ("<a class='dir file' href='//deamon.info/edit/?url="+current+"/"+dat['name']+"' target='_blank' rel='noopener'><p>"+dat['name']+"</p></a>");				}				canvas.append(div);			})		}else if(request.status >= 300 && request.status < 400){			error("Redirection Error");		}else if(request.status >= 500 && request.status < 600){			error("Server Error");		}else if(request.status == 402 || request.status == 403){			error("Access Denied!");		}else if(request.status >= 400 && request.status < 500){			error("Client Error");		}else{			error("Unknown Error?");		}		console.log("loaded: "+request.status);	}		function error(desc){		alert(desc+request.status);	}		function goback(){		fetchdir(myhistory.pop(),false);	}		bback[0].onclick = goback;	fetchdir(basedir);</script>